[{"/home/jools/uni-bus-react/src/index.tsx":"1","/home/jools/uni-bus-react/src/reportWebVitals.ts":"2","/home/jools/uni-bus-react/src/App.tsx":"3","/home/jools/uni-bus-react/src/api/APIUtils.ts":"4","/home/jools/uni-bus-react/src/components/Map/Map.tsx":"5","/home/jools/uni-bus-react/src/components/NewPanel/NewPanel.tsx":"6","/home/jools/uni-bus-react/src/components/Map/mapstyles-light.ts":"7","/home/jools/uni-bus-react/src/components/Map/mapstyles-dark.ts":"8","/home/jools/uni-bus-react/src/config.ts":"9","/home/jools/uni-bus-react/src/stories/Button.stories.tsx":"10","/home/jools/uni-bus-react/src/stories/Header.stories.tsx":"11","/home/jools/uni-bus-react/src/components/Map/Map.stories.tsx":"12","/home/jools/uni-bus-react/src/components/NewPanel/NewPanel.stories.tsx":"13","/home/jools/uni-bus-react/src/components/NextTime/databox.stories.tsx":"14","/home/jools/uni-bus-react/src/components/Time/Time.stories.tsx":"15","/home/jools/uni-bus-react/src/stories/Page.stories.tsx":"16","/home/jools/uni-bus-react/src/components/TimesList/TimesList.stories.tsx":"17","/home/jools/uni-bus-react/src/components/TimesList/TimesList.tsx":"18","/home/jools/uni-bus-react/src/stories/Page.tsx":"19","/home/jools/uni-bus-react/src/components/Time/Time.tsx":"20","/home/jools/uni-bus-react/src/components/NextTime/databox.tsx":"21","/home/jools/uni-bus-react/src/stories/Header.tsx":"22","/home/jools/uni-bus-react/src/stories/Button.tsx":"23"},{"size":500,"mtime":1607191946060,"results":"24","hashOfConfig":"25"},{"size":425,"mtime":1607191946060,"results":"26","hashOfConfig":"25"},{"size":1932,"mtime":1607191946060,"results":"27","hashOfConfig":"25"},{"size":2241,"mtime":1607191946060,"results":"28","hashOfConfig":"25"},{"size":6924,"mtime":1607191946060,"results":"29","hashOfConfig":"25"},{"size":2991,"mtime":1607192227740,"results":"30","hashOfConfig":"25"},{"size":4722,"mtime":1607191190800,"results":"31","hashOfConfig":"25"},{"size":2622,"mtime":1607191190800,"results":"32","hashOfConfig":"25"},{"size":84,"mtime":1607184644330,"results":"33","hashOfConfig":"25"},{"size":804,"mtime":1607192055570,"results":"34","hashOfConfig":"25"},{"size":510,"mtime":1607192055570,"results":"35","hashOfConfig":"25"},{"size":272,"mtime":1607191946060,"results":"36","hashOfConfig":"25"},{"size":357,"mtime":1607191190800,"results":"37","hashOfConfig":"25"},{"size":353,"mtime":1607191190800,"results":"38","hashOfConfig":"25"},{"size":365,"mtime":1607191190800,"results":"39","hashOfConfig":"25"},{"size":605,"mtime":1607192055570,"results":"40","hashOfConfig":"25"},{"size":322,"mtime":1607191190800,"results":"41","hashOfConfig":"25"},{"size":1432,"mtime":1607191946060,"results":"42","hashOfConfig":"25"},{"size":2415,"mtime":1607192055570,"results":"43","hashOfConfig":"25"},{"size":796,"mtime":1607191190800,"results":"44","hashOfConfig":"25"},{"size":396,"mtime":1607191190800,"results":"45","hashOfConfig":"25"},{"size":1356,"mtime":1607192055570,"results":"46","hashOfConfig":"25"},{"size":941,"mtime":1607192055570,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1sye8mo",{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"52"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"58"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"78","messages":"79","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"86","messages":"87","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/jools/uni-bus-react/src/index.tsx",[],"/home/jools/uni-bus-react/src/reportWebVitals.ts",[],["98","99"],"/home/jools/uni-bus-react/src/App.tsx",["100"],"import React, { useState, useEffect } from \"react\";\nimport { MotionValue } from \"framer-motion\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { Map } from \"./components/Map/Map\";\nimport { NewPanelComponent } from \"./components/NewPanel/NewPanel\";\n// import \"../styles/globals.css\";\nimport { Stop } from \"./models/stop\";\nimport { getStops } from \"./api/APIUtils\";\nimport { FormControl, MenuItem, Select } from \"@material-ui/core\";\nimport styles from \"./styles/Home.module.css\";\n\nfunction App() {\n  const [value, setValue] = useState<MotionValue<number>>(new MotionValue(0));\n  const onPanelLoad = (motionValue: MotionValue<number>) => {\n    setValue(motionValue);\n  };\n  const [stops, setStops] = useState([]);\n  const [currentStop, setCurrentStop] = useState<Stop>();\n  useEffect(() => {\n    const getData = async () => {\n      const res = await getStops();\n      setStops(res);\n    };\n    getData();\n  }, []);\n  const selectStop = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setCurrentStop(event.target.value as Stop);\n  };\n  return (\n    // <div className=\"App\">\n    <>\n      <Map\n        position={{ lat: 50.794236, lng: -1.075 }}\n        padding={{ bottom: 812 / 2 }}\n        logoPosition={value}\n        stopMarkersEnabled={true}\n        routeOverlayEnabled={true}\n        currentStop={currentStop}\n      />\n      <NewPanelComponent\n        onLoad={onPanelLoad}\n        panel1Children={\n          <>\n            <FormControl className={styles.stopSelector}>\n              <Select\n                className={styles.stopSelectorSelect}\n                value={currentStop}\n                onChange={selectStop}\n              >\n                {stops.map((stop: Stop) => {\n                  return <MenuItem value={stop as any}>{stop.name}</MenuItem>;\n                })}\n              </Select>\n            </FormControl>\n          </>\n        }\n      />\n    </>\n    // </div>\n  );\n}\n\nexport default App;\n","/home/jools/uni-bus-react/src/api/APIUtils.ts",[],["101","102"],"/home/jools/uni-bus-react/src/components/Map/Map.tsx",["103","104","105"],"import {\r\n  GoogleMap,\r\n  Marker,\r\n  Polyline,\r\n  useJsApiLoader,\r\n} from \"@react-google-maps/api\";\r\nimport { mapStylesLight } from \"./mapstyles-light\";\r\nimport { mapStylesDark } from \"./mapstyles-dark\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { getRoutePath, getStops } from \"../../api/APIUtils\";\r\nimport { Stop } from \"../../models/stop\";\r\nimport purpleStopMarker from \"../../assets/stop-marker-icon-purple.svg\";\r\nimport blueStopMarker from \"../../assets/stop-marker-icon-blue.svg\";\r\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\r\nimport {\r\n  motion,\r\n  MotionValue,\r\n  useMotionValue,\r\n  useTransform,\r\n} from \"framer-motion\";\r\nimport { config } from \"../../config\";\r\n\r\nconst mapOptions: google.maps.MapOptions = {\r\n  disableDefaultUI: true,\r\n  gestureHandling: \"greedy\",\r\n  clickableIcons: false,\r\n};\r\n\r\nconst getLocation: () => Promise<google.maps.LatLngLiteral> = () => {\r\n  return new Promise((resolve) => {\r\n    navigator.geolocation.getCurrentPosition((pos) => {\r\n      const position: google.maps.LatLngLiteral = {\r\n        lat: pos.coords.latitude,\r\n        lng: pos.coords.longitude,\r\n      };\r\n      resolve(position);\r\n    });\r\n  });\r\n};\r\n\r\ninterface MapProps {\r\n  style?: CSSProperties;\r\n  position: google.maps.LatLngLiteral;\r\n  padding?: google.maps.Padding;\r\n  darkModeEnabled?: boolean;\r\n  routeOverlayEnabled?: boolean;\r\n  stopMarkersEnabled?: boolean;\r\n  onMarkerSelect?: (stop: Stop) => void;\r\n  logoPosition: MotionValue<number>;\r\n  currentStop?: Stop;\r\n}\r\n\r\nexport const Map = (props: MapProps) => {\r\n  const {\r\n    position,\r\n    style,\r\n    padding,\r\n    darkModeEnabled,\r\n    routeOverlayEnabled,\r\n    stopMarkersEnabled,\r\n    onMarkerSelect,\r\n    logoPosition,\r\n    currentStop,\r\n  } = props;\r\n\r\n  const [map, setMap] = useState<google.maps.Map>();\r\n  const [routeOverlay, setRouteOverlay] = useState<google.maps.LatLng[]>();\r\n  const [stops, setStops] = useState<Stop[]>();\r\n  const [selectedStop, setSelectedStop] = useState<Stop>();\r\n  const logoContainer = useRef() as any;\r\n\r\n  const initialLogoPosition = useMotionValue(0);\r\n  const logoPos = useTransform(\r\n    logoPosition || initialLogoPosition,\r\n    (value) => value - window.innerWidth\r\n  );\r\n\r\n  const getBounds = (\r\n    value: google.maps.LatLngLiteral,\r\n    r: number\r\n  ): google.maps.LatLngBounds => {\r\n    const dY = (360 * r) / 6371;\r\n    const dX = dY * Math.cos(value.lng);\r\n    const lat1 = value.lat - dX;\r\n    const lng1 = value.lng - dY;\r\n    const lat2 = value.lat + dX;\r\n    const lng2 = value.lng + dY;\r\n    return new google.maps.LatLngBounds(\r\n      { lat: lat1, lng: lng1 },\r\n      { lat: lat2, lng: lng2 }\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      setRouteOverlay(await getRoutePath());\r\n      setStops(await getStops());\r\n    };\r\n    getData();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (map) {\r\n      const bounds = getBounds(position, 0.5);\r\n      map.fitBounds(bounds, padding);\r\n    }\r\n  }, [position]);\r\n\r\n  useEffect(() => {\r\n    setSelectedStop(currentStop);\r\n    if (map && currentStop) {\r\n      const bounds = getBounds(\r\n        { lat: currentStop.location.lat(), lng: currentStop.location.lng() },\r\n        0.05\r\n      );\r\n      map.fitBounds(bounds, padding);\r\n    }\r\n  }, [currentStop]);\r\n\r\n  const moveLogo = (map: any) => {\r\n    let isCalled = false;\r\n    const mapObserver = new MutationObserver((mutationList, observer) => {\r\n      for (const mutation of mutationList) {\r\n        if (mutation.type === \"childList\") {\r\n          const logoElement = map.__gm.Ma.querySelector('[rel=\"noopener\"]');\r\n          if (logoElement) {\r\n            if (!isCalled) {\r\n              isCalled = true;\r\n              observer.disconnect();\r\n              const logoEl = logoElement.parentElement.removeChild(logoElement);\r\n              if (logoEl && logoContainer) {\r\n                logoContainer?.current?.append(logoEl);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    mapObserver.observe(map.__gm.Ma, { childList: true, subtree: true });\r\n  };\r\n\r\n  const { isLoaded, loadError } = useJsApiLoader({\r\n    googleMapsApiKey: config.mapsApiKey,\r\n  });\r\n\r\n  const renderMap = () => {\r\n    const onLoad = (mapInstance: google.maps.Map) => {\r\n      setMap(mapInstance);\r\n      const bounds = getBounds(position, 0.5);\r\n      mapInstance.fitBounds(bounds, padding);\r\n      moveLogo(mapInstance);\r\n    };\r\n\r\n    const onUnmount = () => {\r\n      setMap(undefined);\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <motion.div\r\n          style={{\r\n            position: \"absolute\",\r\n            zIndex: 99999,\r\n            bottom: \"52vh\",\r\n            left: \"4vw\",\r\n            x: logoPos,\r\n          }}\r\n          ref={logoContainer}\r\n        ></motion.div>\r\n        <GoogleMap\r\n          mapContainerStyle={{\r\n            ...(style || { width: \"100vw\", height: \"100vh\" }),\r\n            zIndex: 10,\r\n          }}\r\n          options={{\r\n            ...mapOptions,\r\n            styles: darkModeEnabled ? mapStylesDark : mapStylesLight,\r\n          }}\r\n          onLoad={onLoad}\r\n          onUnmount={onUnmount}\r\n        >\r\n          {routeOverlayEnabled && (\r\n            <Polyline\r\n              path={routeOverlay}\r\n              options={{\r\n                strokeColor: darkModeEnabled ? \"#03A9F4\" : \"#7B1FA2\",\r\n                strokeOpacity: 0.75,\r\n              }}\r\n            />\r\n          )}\r\n          {stopMarkersEnabled &&\r\n            stops?.map((stop, index) => {\r\n              return (\r\n                <Marker\r\n                  key={index}\r\n                  position={stop.location}\r\n                  options={{\r\n                    icon: {\r\n                      url:\r\n                        (darkModeEnabled &&\r\n                          selectedStop?.routeOrder !== index) ||\r\n                        (!darkModeEnabled && selectedStop?.routeOrder === index)\r\n                          ? blueStopMarker\r\n                          : purpleStopMarker,\r\n                      scaledSize: new google.maps.Size(35, 50),\r\n                      origin: new google.maps.Point(0, 0),\r\n                      anchor: new google.maps.Point(17.5, 50),\r\n                    },\r\n                  }}\r\n                  onClick={() => {\r\n                    setSelectedStop(stop);\r\n                    const bounds = getBounds(\r\n                      {\r\n                        lat: stop.location.lat(),\r\n                        lng: stop.location.lng(),\r\n                      },\r\n                      0.05\r\n                    );\r\n                    map?.fitBounds(bounds, padding);\r\n                    onMarkerSelect && onMarkerSelect(stop);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n        </GoogleMap>\r\n      </>\r\n    );\r\n  };\r\n\r\n  if (loadError) {\r\n    return <div>Map cannot be loaded :(</div>;\r\n  }\r\n\r\n  return isLoaded ? renderMap() : <div>loading...</div>;\r\n};\r\n","/home/jools/uni-bus-react/src/components/NewPanel/NewPanel.tsx",["106","107"],"/home/jools/uni-bus-react/src/components/Map/mapstyles-light.ts",[],"/home/jools/uni-bus-react/src/components/Map/mapstyles-dark.ts",[],"/home/jools/uni-bus-react/src/config.ts",[],"/home/jools/uni-bus-react/src/stories/Button.stories.tsx",[],"/home/jools/uni-bus-react/src/stories/Header.stories.tsx",[],"/home/jools/uni-bus-react/src/components/Map/Map.stories.tsx",["108"],"/home/jools/uni-bus-react/src/components/NewPanel/NewPanel.stories.tsx",["109"],"/home/jools/uni-bus-react/src/components/NextTime/databox.stories.tsx",["110","111"],"/home/jools/uni-bus-react/src/components/Time/Time.stories.tsx",["112"],"/home/jools/uni-bus-react/src/stories/Page.stories.tsx",[],"/home/jools/uni-bus-react/src/components/TimesList/TimesList.stories.tsx",["113"],"/home/jools/uni-bus-react/src/components/TimesList/TimesList.tsx",["114"],"/home/jools/uni-bus-react/src/stories/Page.tsx",[],"/home/jools/uni-bus-react/src/components/Time/Time.tsx",[],"/home/jools/uni-bus-react/src/components/NextTime/databox.tsx",[],"/home/jools/uni-bus-react/src/stories/Header.tsx",[],"/home/jools/uni-bus-react/src/stories/Button.tsx",[],{"ruleId":"115","replacedBy":"116"},{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","severity":1,"message":"120","line":3,"column":8,"nodeType":"121","messageId":"122","endLine":3,"endColumn":12},{"ruleId":"115","replacedBy":"123"},{"ruleId":"117","replacedBy":"124"},{"ruleId":"119","severity":1,"message":"125","line":29,"column":7,"nodeType":"121","messageId":"122","endLine":29,"endColumn":60},{"ruleId":"126","severity":1,"message":"127","line":105,"column":6,"nodeType":"128","endLine":105,"endColumn":16,"suggestions":"129"},{"ruleId":"126","severity":1,"message":"127","line":116,"column":6,"nodeType":"128","endLine":116,"endColumn":19,"suggestions":"130"},{"ruleId":"119","severity":1,"message":"131","line":21,"column":43,"nodeType":"121","messageId":"122","endLine":21,"endColumn":48},{"ruleId":"126","severity":1,"message":"132","line":31,"column":6,"nodeType":"128","endLine":31,"endColumn":8,"suggestions":"133"},{"ruleId":"134","severity":1,"message":"135","line":4,"column":1,"nodeType":"136","endLine":7,"endColumn":3},{"ruleId":"134","severity":1,"message":"135","line":4,"column":1,"nodeType":"136","endLine":7,"endColumn":3},{"ruleId":"119","severity":1,"message":"137","line":2,"column":17,"nodeType":"121","messageId":"122","endLine":2,"endColumn":23},{"ruleId":"134","severity":1,"message":"135","line":5,"column":1,"nodeType":"136","endLine":8,"endColumn":3},{"ruleId":"134","severity":1,"message":"135","line":4,"column":1,"nodeType":"136","endLine":7,"endColumn":3},{"ruleId":"134","severity":1,"message":"135","line":4,"column":1,"nodeType":"136","endLine":7,"endColumn":3},{"ruleId":"126","severity":1,"message":"138","line":38,"column":6,"nodeType":"128","endLine":38,"endColumn":14,"suggestions":"139"},"no-native-reassign",["140"],"no-negated-in-lhs",["141"],"@typescript-eslint/no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar",["140"],["141"],"'getLocation' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'map' and 'padding'. Either include them or remove the dependency array.","ArrayExpression",["142"],["143"],"'style' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'onLoad' and 'x'. Either include them or remove the dependency array.",["144"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","'useRef' is defined but never used.","React Hook useEffect has a missing dependency: 'intervalID'. Either include it or remove the dependency array.",["145"],"no-global-assign","no-unsafe-negation",{"desc":"146","fix":"147"},{"desc":"148","fix":"149"},{"desc":"150","fix":"151"},{"desc":"152","fix":"153"},"Update the dependencies array to be: [map, padding, position]",{"range":"154","text":"155"},"Update the dependencies array to be: [currentStop, map, padding]",{"range":"156","text":"157"},"Update the dependencies array to be: [onLoad, x]",{"range":"158","text":"159"},"Update the dependencies array to be: [intervalID, stopID]",{"range":"160","text":"161"},[2983,2993],"[map, padding, position]",[3273,3286],"[currentStop, map, padding]",[786,788],"[onLoad, x]",[1046,1054],"[intervalID, stopID]"]